document.addEventListener("DOMContentLoaded",()=>{const c=document.querySelectorAll("[data-theme-toggle]");function e(s){document.body.setAttribute("data-theme",s),localStorage.setItem("theme",s),t(s)}function t(s){c.forEach(a=>{const r=a.querySelector("i");r&&r.setAttribute("data-lucide",s==="dark"?"sun":"moon")}),typeof lucide<"u"&&lucide.createIcons()}function n(){const s=document.body.getAttribute("data-theme")==="dark"?"light":"dark";e(s)}const o=localStorage.getItem("theme"),i=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;e(o||(i?"dark":"light")),c.forEach(s=>{s.addEventListener("click",n)});const f=document.getElementById("navbar");window.addEventListener("scroll",()=>{window.scrollY>50?f.classList.add("scrolled"):f.classList.remove("scrolled")});let S=document.querySelectorAll(".animate-on-scroll");const R=(s,a=1)=>s.getBoundingClientRect().top<=(window.innerHeight||document.documentElement.clientHeight)/a,F=s=>{s.classList.add("is-visible")},E=()=>{S.forEach(s=>{R(s,1.15)&&F(s)})};E(),window.addEventListener("scroll",E);const x=document.getElementById("canvas-container");if(x&&typeof THREE<"u"){let L=function(){requestAnimationFrame(L);const h=Date.now()*1e-4;v.rotation.y=h*.5,v.rotation.x=h*.2,r.render(s,a)};var Y=L;let s=new THREE.Scene,a=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3);a.position.z=50;let r=new THREE.WebGLRenderer({alpha:!0});r.setSize(window.innerWidth,window.innerHeight),r.setPixelRatio(window.devicePixelRatio),x.appendChild(r.domElement);const l=5e3,d=new THREE.BufferGeometry,u=new Float32Array(l*3),y=new Float32Array(l*3),b=new THREE.Color;for(let h=0;h<l;h++){const p=h*3,T=200,w=Math.acos(-1+2*Math.random()),A=Math.sqrt(l*Math.PI)*w;u[p]=T*Math.cos(A)*Math.sin(w),u[p+1]=T*Math.sin(A)*Math.sin(w),u[p+2]=T*Math.cos(w),b.setHSL(.5+Math.random()*.1,.7,.5+Math.random()*.2),y[p]=b.r,y[p+1]=b.g,y[p+2]=b.b}d.setAttribute("position",new THREE.BufferAttribute(u,3)),d.setAttribute("color",new THREE.BufferAttribute(y,3));const z=new THREE.PointsMaterial({size:.5,vertexColors:!0,transparent:!0,opacity:.7,blending:THREE.AdditiveBlending});let v=new THREE.Points(d,z);s.add(v),window.addEventListener("resize",()=>{a.aspect=window.innerWidth/window.innerHeight,a.updateProjectionMatrix(),r.setSize(window.innerWidth,window.innerHeight)},!1),L()}const g=document.getElementById("contact-form");g&&g.addEventListener("submit",async s=>{s.preventDefault();const a=document.getElementById("form-status"),r=new FormData(s.target);try{const l=await fetch(s.target.action,{method:g.method,body:r,headers:{Accept:"application/json"}});if(l.ok)a.textContent="Thanks for your submission!",a.style.color="green",g.reset();else{const d=await l.json();Object.hasOwn(d,"errors")?a.textContent=d.errors.map(u=>u.message).join(", "):a.textContent="Oops! There was a problem submitting your form",a.style.color="red"}}catch{a.textContent="Oops! There was a problem submitting your form",a.style.color="red"}finally{setTimeout(()=>{a.textContent=""},5e3)}});const I=document.getElementById("current-year");I&&(I.textContent=new Date().getFullYear());async function O(s,a=6){const r=`https://api.github.com/users/${s}/repos?per_page=${a}&sort=updated`,l=await fetch(r,{headers:{Accept:"application/vnd.github+json"}});if(!l.ok)throw new Error(`GitHub API error: ${l.status}`);return(await l.json()).filter(u=>!u.fork&&!u.archived)}function D(s){const a=(s.topics||[]).slice(0,4).map(l=>`<span class="tech-tag">${l}</span>`).join(""),r=s.language?`<span class="tech-tag">${s.language}</span>`:"";return`
        <div class="card glassmorphic project-card animate-on-scroll">
            <div>
                <h3 class="project-title">
                    <i data-lucide="github"></i>
                    <a href="${s.html_url}" target="_blank" rel="noopener noreferrer">${s.name}</a>
                </h3>
                <p class="project-description">${s.description||""}</p>
                <div class="tech-tags">${r}${a}</div>
            </div>
            <div class="project-stats">
                <span>★ ${s.stargazers_count}</span>
                <span>Updated: ${new Date(s.updated_at).toLocaleDateString()}</span>
            </div>
        </div>`}async function $(){const s=document.querySelectorAll("[data-github-repos]");for(const a of s){const r=a.getAttribute("data-github-repos"),l=Number(a.getAttribute("data-per-page")||"6");try{a.innerHTML='<p class="loading-text">Loading repositories...</p>';const d=await O(r,l);a.innerHTML=d.map(D).join(""),S=document.querySelectorAll(".animate-on-scroll"),E(),typeof lucide<"u"&&lucide.createIcons()}catch(d){console.error(d),a.innerHTML='<p class="error-text">Failed to load repositories.</p>'}}}$(),typeof lucide<"u"&&lucide.createIcons()});class B{constructor(){this.observedElements=new Set,this.init()}init(){this.createIntersectionObserver(),this.initParallaxElements(),this.initMagneticElements(),this.initTypewriterEffect(),this.initMobileOptimizations()}createIntersectionObserver(){const e={root:null,rootMargin:"0px 0px -50px 0px",threshold:.1};this.observer=new IntersectionObserver(t=>{t.forEach(n=>{n.isIntersecting&&(this.animateElement(n.target),this.observer.unobserve(n.target))})},e),document.querySelectorAll("[data-animate]").forEach(t=>{this.observer.observe(t)})}animateElement(e){const t=e.dataset.animate,n=e.dataset.delay||0;setTimeout(()=>{switch(t){case"fade-in":e.style.animation="staggerFadeIn 0.6s ease-out forwards";break;case"slide-left":e.style.animation="slideInLeft 0.8s ease-out forwards";break;case"slide-right":e.style.animation="slideInRight 0.8s ease-out forwards";break;case"scale-up":e.style.animation="scaleUp 0.6s ease-out forwards";break;case"rotate-in":e.style.animation="rotateIn 0.8s ease-out forwards";break;default:e.classList.add("is-visible")}},n)}initParallaxElements(){if(window.innerWidth<=768)return;const e=document.querySelectorAll(".parallax-element");window.addEventListener("scroll",()=>{const t=window.pageYOffset;e.forEach(n=>{const o=t*-.5;n.style.transform=`translateY(${o}px)`})})}initMagneticElements(){document.querySelectorAll(".magnetic").forEach(t=>{t.addEventListener("mousemove",n=>{if(window.innerWidth<=768)return;const o=t.getBoundingClientRect(),i=n.clientX-o.left-o.width/2,m=n.clientY-o.top-o.height/2;t.style.transform=`translate(${i*.1}px, ${m*.1}px) scale(1.05)`}),t.addEventListener("mouseleave",()=>{t.style.transform="translate(0px, 0px) scale(1)"})})}initTypewriterEffect(){document.querySelectorAll(".typewriter").forEach(t=>{const n=t.textContent,o=t.dataset.speed||50;t.textContent="",t.style.borderRight="2px solid #06b6d4",t.style.animation="blink 1s infinite";let i=0;const m=setInterval(()=>{i<n.length?(t.textContent+=n.charAt(i),i++):(clearInterval(m),setTimeout(()=>{t.style.borderRight="none",t.style.animation="none"},1e3))},o)})}initMobileOptimizations(){window.innerWidth<=768&&(document.documentElement.style.setProperty("--animation-duration","0.3s"),document.querySelectorAll(".btn, .card, .social-link").forEach(t=>{t.addEventListener("touchstart",()=>{t.style.transform="scale(0.95)"}),t.addEventListener("touchend",()=>{t.style.transform="scale(1)"})}))}}class P{constructor(){this.isOpen=!1,this.init()}init(){this.createMobileNav(),this.bindEvents()}createMobileNav(){const e=document.getElementById("mobile-menu");e&&e.classList.add("enhanced-mobile-nav")}bindEvents(){const e=document.getElementById("menu-btn"),t=document.getElementById("close-menu-btn"),n=document.getElementById("mobile-menu"),o=document.getElementById("mobile-menu-backdrop");e&&n?e.addEventListener("click",i=>{i.preventDefault(),i.stopPropagation(),this.openNav()}):console.warn("Mobile menu elements not found:",{menuBtn:e,mobileMenu:n}),t&&t.addEventListener("click",i=>{i.preventDefault(),i.stopPropagation(),this.closeNav()}),o&&o.addEventListener("click",i=>{i.preventDefault(),i.stopPropagation(),this.closeNav()}),n&&n.querySelectorAll(".mobile-menu-link").forEach(m=>{m.addEventListener("click",f=>{m.hasAttribute("data-theme-toggle")||this.closeNav()})}),document.addEventListener("keydown",i=>{i.key==="Escape"&&this.isOpen&&this.closeNav()})}openNav(){const e=document.getElementById("mobile-menu"),t=document.getElementById("mobile-menu-backdrop");e&&t&&(e.classList.add("is-open"),t.classList.add("is-open"),document.body.style.overflow="hidden",this.isOpen=!0,e.querySelectorAll(".mobile-menu-link").forEach((o,i)=>{o.style.animation=`slideInRight 0.3s ease-out ${i*.1}s forwards`}))}closeNav(){const e=document.getElementById("mobile-menu"),t=document.getElementById("mobile-menu-backdrop");e&&t&&(e.classList.remove("is-open"),t.classList.remove("is-open"),document.body.style.overflow="",this.isOpen=!1,e.querySelectorAll(".mobile-menu-link").forEach(o=>{o.style.animation=""}))}}class M{constructor(){this.init()}init(){"requestIdleCallback"in window?requestIdleCallback(()=>{this.optimizeForDevice()}):setTimeout(()=>this.optimizeForDevice(),100)}optimizeForDevice(){if(this.detectLowEndDevice()){document.body.classList.add("low-performance-mode");const t=document.createElement("style");t.textContent=`
                .low-performance-mode * {
                    animation-duration: 0.2s !important;
                    transition-duration: 0.2s !important;
                }
                .low-performance-mode .parallax-element {
                    transform: none !important;
                }
            `,document.head.appendChild(t)}}detectLowEndDevice(){const e=navigator.connection||navigator.mozConnection||navigator.webkitConnection,t=navigator.deviceMemory,n=navigator.hardwareConcurrency;return!!(t&&t<4||n&&n<4||e&&(e.effectiveType==="slow-2g"||e.effectiveType==="2g"))}}class C{constructor(){this.init()}init(){"IntersectionObserver"in window?this.createImageObserver():this.fallbackLoad()}createImageObserver(){const e=new IntersectionObserver(t=>{t.forEach(n=>{n.isIntersecting&&(this.loadImage(n.target),e.unobserve(n.target))})});document.querySelectorAll("img[data-src]").forEach(t=>{e.observe(t)})}loadImage(e){e.classList.add("lazy-load");const t=new Image;t.onload=()=>{e.src=t.src,e.classList.remove("lazy-load"),e.classList.add("loaded")},t.onerror=()=>{e.classList.remove("lazy-load"),e.classList.add("error")},t.src=e.dataset.src}fallbackLoad(){document.querySelectorAll("img[data-src]").forEach(e=>{e.src=e.dataset.src})}}class q{constructor(){this.currentTheme=localStorage.getItem("theme")||"light",this.init()}init(){this.applyTheme(this.currentTheme),this.bindEvents(),this.detectSystemTheme()}applyTheme(e){document.body.setAttribute("data-theme",e),this.currentTheme=e,localStorage.setItem("theme",e),document.querySelectorAll("[data-theme-toggle]").forEach(n=>{const o=n.querySelector("i");o&&o.setAttribute("data-lucide",e==="dark"?"sun":"moon")}),typeof lucide<"u"&&lucide.createIcons(),document.documentElement.style.transition="color 0.3s ease, background-color 0.3s ease",setTimeout(()=>{document.documentElement.style.transition=""},300)}toggleTheme(){const e=this.currentTheme==="dark"?"light":"dark";this.applyTheme(e),document.querySelectorAll("[data-theme-toggle]").forEach(n=>{n.style.transform="scale(0.9)",setTimeout(()=>{n.style.transform="scale(1)"},150)})}detectSystemTheme(){if(window.matchMedia){const e=window.matchMedia("(prefers-color-scheme: dark)");localStorage.getItem("theme")||this.applyTheme(e.matches?"dark":"light"),e.addEventListener("change",t=>{localStorage.getItem("theme-manual")||this.applyTheme(t.matches?"dark":"light")})}}bindEvents(){document.querySelectorAll("[data-theme-toggle]").forEach(t=>{t.addEventListener("click",()=>{localStorage.setItem("theme-manual","true"),this.toggleTheme()})})}}document.addEventListener("DOMContentLoaded",()=>{new B,new M,new C,new q,document.body.classList.add("page-transition"),window.originalScript&&window.originalScript(),typeof lucide<"u"&&lucide.createIcons(),document.querySelectorAll("section").forEach((n,o)=>{n.setAttribute("data-animate","fade-in"),n.setAttribute("data-delay",o*200)}),document.querySelectorAll(".card").forEach(n=>{n.classList.add("advanced-hover","float-on-hover")}),document.querySelectorAll(".btn").forEach(n=>{n.classList.add("magnetic","pulse-on-hover")})});function k(){const c=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${c}px`)}k();window.addEventListener("resize",k);window.addEventListener("orientationchange",k);function N(c,e){let t;return function(...o){const i=()=>{clearTimeout(t),c(...o)};clearTimeout(t),t=setTimeout(i,e)}}const j=N(()=>{const c=window.pageYOffset,e=document.getElementById("navbar");e&&(c>50?e.classList.add("scrolled"):e.classList.remove("scrolled")),window.innerWidth>768&&document.querySelectorAll(".parallax-element").forEach(n=>{const o=c*-.3;n.style.transform=`translateY(${o}px)`})},10);window.addEventListener("scroll",j,{passive:!0});class H{constructor(){this.form=document.getElementById("contact-form"),this.inputs=document.querySelectorAll(".form-input"),this.submitButton=document.querySelector('#contact-form button[type="submit"]'),this.statusElement=document.getElementById("form-status"),this.form&&this.init()}init(){this.setupInputAnimations(),this.setupFormSubmission(),this.setupValidation()}setupInputAnimations(){this.inputs.forEach(e=>{e.addEventListener("focus",t=>{this.createRipple(t.target,t),this.clearValidationState(t.target)}),e.addEventListener("mouseenter",t=>{document.activeElement!==t.target&&(t.target.style.transform="translateY(-2px)")}),e.addEventListener("mouseleave",t=>{document.activeElement!==t.target&&(t.target.style.transform="translateY(0)")}),e.addEventListener("input",t=>{this.clearValidationState(t.target),clearTimeout(t.target.validationTimer),t.target.validationTimer=setTimeout(()=>{this.validateField(t.target)},500)}),e.addEventListener("blur",t=>{this.validateField(t.target)})})}createRipple(e,t){const n=document.createElement("div"),o=e.getBoundingClientRect(),i=Math.max(o.width,o.height),m=t.clientX-o.left-i/2,f=t.clientY-o.top-i/2;n.style.cssText=`
            position: absolute;
            width: ${i}px;
            height: ${i}px;
            left: ${m}px;
            top: ${f}px;
            background: radial-gradient(circle, rgba(59, 130, 246, 0.3) 0%, transparent 70%);
            border-radius: 50%;
            transform: scale(0);
            animation: ripple 0.6s ease-out;
            pointer-events: none;
            z-index: 1;
        `,e.style.position="relative",e.style.overflow="hidden",e.appendChild(n),setTimeout(()=>{n.remove()},600)}validateField(e){const t=e.value.trim();let n=!0;return this.clearValidationState(e),e.hasAttribute("required")&&!t?n=!1:e.type==="email"&&t&&(n=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)),t&&e.classList.add(n?"success":"error"),n}clearValidationState(e){e.classList.remove("success","error")}setupFormSubmission(){this.form.addEventListener("submit",async e=>{e.preventDefault();let t=!0;this.inputs.forEach(n=>{this.validateField(n)||(t=!1)}),t?await this.submitWithAnimation():this.shakeForm()})}async submitWithAnimation(){this.submitButton.classList.add("loading"),this.submitButton.disabled=!0;const e=this.submitButton.innerHTML;try{const t=new FormData(this.form);if((await fetch(this.form.action,{method:"POST",body:t,headers:{Accept:"application/json"}})).ok)this.showSuccess(),setTimeout(()=>{this.resetForm(e)},2e3);else throw new Error("Network response was not ok")}catch{this.showError(),setTimeout(()=>{this.resetForm(e)},2e3)}}showSuccess(){this.submitButton.innerHTML="✓ Sent Successfully!",this.submitButton.style.background="linear-gradient(135deg, #10b981, #059669)",this.statusElement.textContent="Thank you! Your message has been sent.",this.statusElement.className="text-center text-sm mt-4 text-green-400"}showError(){this.submitButton.innerHTML="✗ Error Occurred",this.submitButton.style.background="linear-gradient(135deg, #ef4444, #dc2626)",this.statusElement.textContent="Sorry, there was an error sending your message. Please try again.",this.statusElement.className="text-center text-sm mt-4 text-red-400"}resetForm(e){this.submitButton.classList.remove("loading"),this.submitButton.disabled=!1,this.submitButton.innerHTML=e,this.submitButton.style.background="",this.form.reset(),this.statusElement.textContent="",this.inputs.forEach(t=>{this.clearValidationState(t)})}shakeForm(){this.form.style.animation="shake 0.5s ease-in-out",setTimeout(()=>{this.form.style.animation=""},500)}setupValidation(){this.inputs.forEach(e=>{e.addEventListener("keyup",()=>{e.value.length>0&&this.validateField(e)})})}}document.addEventListener("DOMContentLoaded",()=>{new H});window.EnhancedFeatures={AnimationController:B,MobileNavigation:P,PerformanceMonitor:M,LazyLoader:C,ThemeController:q,ContactFormEnhancer:H};
