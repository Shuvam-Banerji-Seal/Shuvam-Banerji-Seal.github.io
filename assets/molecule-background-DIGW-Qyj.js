(function(){const M=document.getElementById("molecules-canvas");if(!M)return;const d=new THREE.Scene,s=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3),c=new THREE.WebGLRenderer({canvas:M,alpha:!0,antialias:!0});c.setSize(window.innerWidth,window.innerHeight),c.setPixelRatio(window.devicePixelRatio),s.position.z=30;const f=[],r={carbon:2236962,oxygen:16711680,nitrogen:255,hydrogen:16777215};function P(n,E){const t=new THREE.Group;t.position.copy(E);const i=new THREE.SphereGeometry(.3,16,16),z=new THREE.CylinderGeometry(.05,.05,1,8);if(n==="water"){const h=new THREE.Mesh(i,new THREE.MeshPhongMaterial({color:r.oxygen}));h.scale.set(1.2,1.2,1.2),t.add(h);const a=new THREE.Mesh(i,new THREE.MeshPhongMaterial({color:r.hydrogen}));a.position.set(-1,.7,0),a.scale.set(.8,.8,.8),t.add(a);const o=new THREE.Mesh(i,new THREE.MeshPhongMaterial({color:r.hydrogen}));o.position.set(1,.7,0),o.scale.set(.8,.8,.8),t.add(o);const e=new THREE.Mesh(z,new THREE.MeshBasicMaterial({color:8947848}));e.position.set(-.5,.35,0),e.rotation.z=Math.PI/6,t.add(e);const w=new THREE.Mesh(z,new THREE.MeshBasicMaterial({color:8947848}));w.position.set(.5,.35,0),w.rotation.z=-Math.PI/6,t.add(w)}else if(n==="methane"){const h=new THREE.Mesh(i,new THREE.MeshPhongMaterial({color:r.carbon}));t.add(h),[[0,1,0],[.94,-.33,0],[-.47,-.33,.82],[-.47,-.33,-.82]].forEach(o=>{const e=new THREE.Mesh(i,new THREE.MeshPhongMaterial({color:r.hydrogen}));e.position.set(o[0],o[1],o[2]),e.scale.set(.8,.8,.8),t.add(e)})}else if(n==="benzene")for(let a=0;a<6;a++){const o=a*Math.PI*2/6,e=new THREE.Mesh(i,new THREE.MeshPhongMaterial({color:r.carbon}));e.position.set(Math.cos(o)*1.5,Math.sin(o)*1.5,0),t.add(e)}else if(n==="ammonia"){const h=new THREE.Mesh(i,new THREE.MeshPhongMaterial({color:r.nitrogen}));t.add(h),[[0,1,0],[.87,-.5,0],[-.87,-.5,0]].forEach(o=>{const e=new THREE.Mesh(i,new THREE.MeshPhongMaterial({color:r.hydrogen}));e.position.set(o[0],o[1],o[2]),e.scale.set(.8,.8,.8),t.add(e)})}return t.rotationSpeed={x:(Math.random()-.5)*.02,y:(Math.random()-.5)*.02,z:(Math.random()-.5)*.02},t.drift={x:(Math.random()-.5)*.01,y:(Math.random()-.5)*.01,z:(Math.random()-.5)*.01},t}const p=["water","methane","benzene","ammonia"];for(let n=0;n<15;n++){const E=p[Math.floor(Math.random()*p.length)],t=new THREE.Vector3((Math.random()-.5)*50,(Math.random()-.5)*50,(Math.random()-.5)*50),i=P(E,t);f.push(i),d.add(i)}const u=new THREE.AmbientLight(4210752,1);d.add(u);const H=new THREE.DirectionalLight(16777215,.8);H.position.set(10,10,10),d.add(H);const l=new THREE.PointLight(3900150,.5,50);l.position.set(-10,-10,10),d.add(l);const R=new THREE.BufferGeometry,T=200,g=new Float32Array(T*3);for(let n=0;n<T*3;n++)g[n]=(Math.random()-.5)*100;R.setAttribute("position",new THREE.BufferAttribute(g,3));const L=new THREE.PointsMaterial({size:.1,color:3900150,transparent:!0,opacity:.6}),y=new THREE.Points(R,L);d.add(y);let m=0,x=0;document.addEventListener("mousemove",n=>{m=n.clientX/window.innerWidth*2-1,x=-(n.clientY/window.innerHeight)*2+1});function b(){requestAnimationFrame(b),f.forEach((n,E)=>{n.rotation.x+=n.rotationSpeed.x,n.rotation.y+=n.rotationSpeed.y,n.rotation.z+=n.rotationSpeed.z,n.position.x+=n.drift.x,n.position.y+=n.drift.y,n.position.z+=n.drift.z,Math.abs(n.position.x)>30&&(n.drift.x*=-1),Math.abs(n.position.y)>30&&(n.drift.y*=-1),Math.abs(n.position.z)>30&&(n.drift.z*=-1)}),y.rotation.y+=5e-4,s.position.x+=(m*2-s.position.x)*.05,s.position.y+=(x*2-s.position.y)*.05,s.lookAt(d.position),c.render(d,s)}b(),window.addEventListener("resize",()=>{s.aspect=window.innerWidth/window.innerHeight,s.updateProjectionMatrix(),c.setSize(window.innerWidth,window.innerHeight)}),window.addEventListener("scroll",()=>{const n=window.scrollY;s.position.z=30+n*.01})})();
